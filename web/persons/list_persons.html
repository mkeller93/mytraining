<!--
Copyright (c) 2013, the Dart project authors.  Please see the AUTHORS file
for details. All rights reserved. Use of this source code is governed by a
BSD-style license that can be found in the LICENSE file.
-->
<link rel="import" href="add_person.html">
<polymer-element name="list-persons-control">
<template>
  <div id="main-content">
    <template if="{{success != ''}}">
      <span class="success">{{success}}</span><br><br>
    </template>
    <template if="{{error != ''}}">
      <span class="error">{{error}}</span><br><br>
    </template>
    <template if="{{action == 'delete'}}">
      Really Delete {{selectedPerson.firstname}} {{selectedPerson.name}}?
      <button class="red_button" on-click="{{deletePerson}}">Yes</button>
      <button class="green_button" on-click="{{cancelDelete}}">No</button>
    </template>
   
    <template if="{{action == 'edit'}}">
      <add-person-control on-finish="{{editFinished}}" person="{{selectedPerson}}"></add-person-control>
    </template>
   
    <template if="{{action == 'list'}}">
      <template if="{{editable == true}}">
        <table>
          <thead>
            <tr class="table_header">
              <th style="width: 15%;">Name</th>
              <th style="width: 15%;">Birthday</th>
              <th style="width: 15%;">Phone Number</th>
              <th style="width: 15%;">Home Number</th>
              <th style="width: 15%;">Email</th>
              <th style="width: 15%;">Address</th>              
              <th style="width: 15%;">Action </th>
            </tr>
          </thead>
          <tbody>
            <tr template repeat="{{person in persons}}">
              <td>{{person.firstname}} {{person.name}}</td>
              <td>{{person.birthday}}</td>
              <td>{{person.phoneNumber}}</td>
              <td>{{person.homeNumber}}</td>
              <td>{{person.email}}</td>
              <td>{{person.address}}, {{person.place}}</td>
              <td>
                <button class="orange_button" on-click="{{editPerson}}" person-id="{{person.id}}">Edit</button>
                <button class="red_button" on-click="{{showDeletePerson}}" person-id="{{person.id}}">Delete</button>
              </td>    
            </tr>
          </tbody>
        </table>
      </template>
      <template if="{{editable == false}}">
        <table>
          <thead>
            <tr class="table_header">
              <th style="width: 18%;">Name</th>
              <th style="width: 18%;">Birthday</th>
              <th style="width: 18%;">Phone Number</th>
              <th style="width: 18%;">Home Number</th>
              <th style="width: 18%;">Email</th>
              <th style="width: 18%;">Address</th>
            </tr>
          </thead>
          <tbody>
            <tr template repeat="{{person in persons}}">
              <td>{{person.firstname}} {{person.name}}</td>
              <td>{{person.birthday}}</td>
              <td>{{person.phoneNumber}}</td>
              <td>{{person.homeNumber}}</td>
              <td>{{person.email}}</td>
              <td>{{person.address}}, {{person.place}}</td>
            </tr>
          </tbody>
        </table>
      </template>
   </template>
   
  </div>
</template>
<script type="application/dart" src="list_persons.dart"></script>
</polymer-element>